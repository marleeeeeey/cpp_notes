# William Shotts - The Linux Command Line

- [Часть I. Командная оболочка](#часть-i-командная-оболочка)
  - [Глава 1. Что такое командная оболочка](#глава-1-что-такое-командная-оболочка)
  - [Глава 2. Навигация](#глава-2-навигация)
  - [Глава 3. Исследование системы](#глава-3-исследование-системы)
  - [Глава 4. Операции с файлами и каталогами](#глава-4-операции-с-файлами-и-каталогами)
  - [Глава 5. Работа с командами](#глава-5-работа-с-командами)
  - [Глава 6. Перенаправление](#глава-6-перенаправление)
  - [Глава 7. Взгляд на мир глазами командной оболочки](#глава-7-взгляд-на-мир-глазами-командной-оболочки)
  - [Глава 8. Продвинутые приемы работы с клавиатурой](#глава-8-продвинутые-приемы-работы-с-клавиатурой)
  - [Глава 9. Привилегии](#глава-9-привилегии)
  - [Глава 10. Процессы](#глава-10-процессы)
- [Часть II. Окружение и настройка](#часть-ii-окружение-и-настройка)
  - [Глава 11. Окружение](#глава-11-окружение)
  - [Глава 12. Плавное введение в vi](#глава-12-плавное-введение-в-vi)
  - [Глава 13. Настройка приглашения к вводу](#глава-13-настройка-приглашения-к-вводу)
- [Часть III. Типичные задачи и основные инструменты](#часть-iii-типичные-задачи-и-основные-инструменты)
  - [Глава 14. Управление пакетами](#глава-14-управление-пакетами)
  - [Глава 15. Устройства хранения](#глава-15-устройства-хранения)
  - [Глава 16. Сети](#глава-16-сети)
  - [Глава 17. Поиск файлов](#глава-17-поиск-файлов)
  - [Глава 18. Архивация и резервное копирование](#глава-18-архивация-и-резервное-копирование)
  - [Глава 19. Регулярные выражения](#глава-19-регулярные-выражения)
  - [Глава 20. Обработка текста](#глава-20-обработка-текста)
  - [Глава 21. Форматирование вывода](#глава-21-форматирование-вывода)
  - [Глава 22. Печать](#глава-22-печать)
  - [Глава 23. Компиляция программ](#глава-23-компиляция-программ)
- [Часть IV. Сценарии командной оболочки](#часть-iv-сценарии-командной-оболочки)
  - [Глава 24. Создание первого сценария командной оболочки](#глава-24-создание-первого-сценария-командной-оболочки)
  - [Глава 25. Начало проекта](#глава-25-начало-проекта)
  - [Глава 26. Проектирование сверху вниз](#глава-26-проектирование-сверху-вниз)
  - [Глава 27. Управление потоком выполнения: ветвление при помощи if](#глава-27-управление-потоком-выполнения-ветвление-при-помощи-if)
  - [Глава 28. Чтение ввода с клавиатуры](#глава-28-чтение-ввода-с-клавиатуры)
  - [Глава 29. Управление потоком выполнения: циклы while и until](#глава-29-управление-потоком-выполнения-циклы-while-и-until)
  - [Глава 30. Поиск и устранение ошибок](#глава-30-поиск-и-устранение-ошибок)
  - [Глава 31. Управление потоком выполнения: ветвление с помощью case](#глава-31-управление-потоком-выполнения-ветвление-с-помощью-case)
  - [Глава 32. Позиционные параметры](#глава-32-позиционные-параметры)
  - [Глава 33. Управление потоком выполнения: цикл for](#глава-33-управление-потоком-выполнения-цикл-for)
  - [Глава 34. Строки и числа](#глава-34-строки-и-числа)
  - [Глава 35. Массивы](#глава-35-массивы)
  - [Глава 36. Экзотика](#глава-36-экзотика)

## Часть I. Командная оболочка

### Глава 1. Что такое командная оболочка

- Командная оболочка - это программа, которая принимает команды, введенные с клавиатуры, и передает их операционной системе для выполнения.
- Примеры командных оболочек: `bash`, `tcsh`, `zsh`, `ksh`, `sh`.
- Эмулятор терминала - это программа, которая позволяет вводить команды в командную оболочку.
- Примеры эмуляторов терминала: `xterm`, `gnome-terminal`, `konsole`, `rxvt`, `aterm`.
- Приглашение к вводу, пример: `user@hostname:~$`.
- Знак суперпользователя - `#`.
- Основные клавиши и команды
  - KeyUp, KeyDown - перемещение по истории команд.
  - `date` - вывод текущей даты и времени.
  - `cal` - вывод календаря.
  - `df` - вывод информации о дисковом пространстве.
  - `free` - вывод информации о памяти.
  - `exit` - выход из командной оболочки.

### Глава 2. Навигация

- В Unix-подобных системах всегда имеется только одна файловая система, начинающаяся с корневого каталога `/`.
- Устройсва хранения данных монтируются в каталоги.
- `pwd` - вывод текущего рабочего каталога.
- `ls` - вывод содержимого каталога.
- `cd` - смена рабочего каталога (cd - change directory).
  - `cd ~user` - переход в домашний каталог пользователя.
- `.` - текущий каталог.
- `..` - родительский каталог.

### Глава 3. Исследование системы

- `ls ~ /` - вывод содержимого домашнего каталога и корневого каталога.
- `ls -l` - вывод содержимого каталога в виде списка (l = long).
- **Мнемоника: `command -option argument`**.
- `ls -lt` - вывод содержимого каталога в виде списка, отсортированного по времени последнего изменения.
  - `l` - long, `t` - time.
- `ls -r` - вывод содержимого каталога в обратном порядке.
- `ls -d` - вывод информации о каталоге, а не его содержимом.
- `ls -S` - сортировка по размеру.
- Пример длинного формата вывода: `-rw-r--r-- 1 user user 0 Sep 27 15:37 file.txt`.
  - `-rw-r--r--` - права доступа.
    - `pos1` - тип файла: `-` - обычный файл, `d` - каталог, `l` - символическаак ссылка.
    - `pos2-4` - права доступа владельца.
    - `pos5-7` - права доступа группы.
    - `pos8-10` - права доступа остальных пользователей.
  - `1` - количество жестких ссылок.
  - `user user` - владелец и группа.
  - `0` - размер в байтах.
  - `Sep 27 15:37` - дата последнего изменения.
  - `file.txt` - имя файла.
- `file file.txt` - вывод информации о типе файла.
- `less file.txt` - просмотр содержимого файла.
  - `q` - выход.
  - `KeyUp`, `KeyDown` - перемещение по тексту.
  - `1G` - переход в начало файла.
  - `/pattern` - поиск строки.
  - `n` - следующее вхождение.

- **Каталоги в системе linux**
  - `/` - корневой каталог.
  - `/bin` - исполняемые файлы, необходимые для загрузки системы.
  - `/boot` - содержит ядро Linux, образ начального RAM-диска и файлы загрузчика.
  - `/dev` - файлы устройств.
  - `/etc` - конфигурационные файлы.
    - `/etc/passwd` - список всех пользователей.
    - `/etc/crontab` - расписание задач.
    - `/etc/fstab` - таблица монтирования.
  - `/home` - домашние каталоги пользователей.
  - `/lib` - библиотеки, необходимые для работы программ.
  - `/media` - точка монтирования для съемных носителей.
  - `/mnt` - точка монтирования для временных файловых систем.
  - `/opt` - дополнительное программное обеспечение.
  - `/proc` - виртуальная файловая система, содержащая информацию о процессах. Позволяет заглянуть в ядро.
  - `/root` - домашний каталог суперпользователя.
  - `/sbin` - исполняемые файлы, необходимые для загрузки системы. Запускаются суперпользователем.
  - `/tmp` - временные файлы.
  - `/usr` - вторичная иерархия каталогов, содержащая исполняемые файлы, библиотеки, заголовочные файлы и документацию обычных пользователей.
    - `/usr/bin` - исполняемые файлы.
    - `/usr/include` - заголовочные файлы.
    - `/usr/lib` - библиотеки.
    - `/usr/local` - дополнительное программное обеспечение. Не входит в состав дистрибутива, но доступно для всех пользователей.
    - `/usr/sbin` - Содержит дополнительные программы для администрирования.
    - `/usr/share` - общие данные. Конфигурационные файлы, документация, иконки.
    - `/usr/share/doc` - документация по установленным пакетам.
    - `/usr/share/man` - справочные страницы.
    - `/var` - содержит изменяемые файлы, такие как журналы, временные файлы, почту и т.д.
      - `/var/log` - журналы.
      - `/var/spool` - почта и принтеры.
      - `/var/tmp` - временные файлы.

### Глава 4. Операции с файлами и каталогами

- Wildcards: `*`, `?`, `[]`, [simbols], [!simbols], [[:class:]].
- `mkdir` - создание каталога.
- `cp source.txt dest.txt` - копирование файла.
  - `cp -a` - копирование со всеми атрибутами.
  - `cp -i` - запрос на подтверждение.
  - `cp -r` - рекурсивное копирование.
  - `cp -u` - копирование только новых файлов.
  - **`cp -v` - подробный вывод.**
- `mv source.txt dest.txt` - перемещение файла. Работает аналогично `cp`.
- `rm file.txt` - удаление файла.
  - `rm -i` - запрос на подтверждение.
  - `rm -r` - рекурсивное удаление.
  - `rm -f` - удаление без запроса на подтверждение.

- **Жесткие ссылки**
  - По умолчанию каждый файл имеет одну жесткую ссылку.
  - Жесткая ссылка не может указывать на файл за пределами собственной файловой системы.
  - Влияют на время жизни файла. Когда удаляется последняя жесткая ссылка, файл удаляется.
  - Создавая жесткую ссылку, мы фактически создаем дополнительнйы раздел с именем, ссылающийся на тот же раздел с данными.
  - `inode` - структура данных, содержащая информацию о файле. Т.е. каждая жесткая ссылка ссылается на определенный индексный узел с содержимым файла.
  - `ln file.txt link.txt` - создание жесткой ссылки.

- **Символические ссылки**
  - Были придуманы, чтобы преодолеть ограничения жестких ссылок. Могут ссылаться на файлы вне текущей файловой системы.
  - Может провиснуть, если целевой файл удален.
  - Символическая ссылка не влияет на время жизни файла.
  - Операции над симолической ссылкой применяются к целевому файлу, кроме команд `rm`, которая удаляет саму ссылку.
  - `ln -s file.txt link.txt` - создание символической ссылки.

### Глава 5. Работа с командами

### Глава 6. Перенаправление

### Глава 7. Взгляд на мир глазами командной оболочки

### Глава 8. Продвинутые приемы работы с клавиатурой

### Глава 9. Привилегии

### Глава 10. Процессы

## Часть II. Окружение и настройка

### Глава 11. Окружение

### Глава 12. Плавное введение в vi

### Глава 13. Настройка приглашения к вводу

## Часть III. Типичные задачи и основные инструменты

### Глава 14. Управление пакетами

### Глава 15. Устройства хранения

### Глава 16. Сети

### Глава 17. Поиск файлов

### Глава 18. Архивация и резервное копирование

### Глава 19. Регулярные выражения

### Глава 20. Обработка текста

### Глава 21. Форматирование вывода

### Глава 22. Печать

### Глава 23. Компиляция программ

## Часть IV. Сценарии командной оболочки

### Глава 24. Создание первого сценария командной оболочки

### Глава 25. Начало проекта

### Глава 26. Проектирование сверху вниз

### Глава 27. Управление потоком выполнения: ветвление при помощи if

### Глава 28. Чтение ввода с клавиатуры

### Глава 29. Управление потоком выполнения: циклы while и until

### Глава 30. Поиск и устранение ошибок

### Глава 31. Управление потоком выполнения: ветвление с помощью case

### Глава 32. Позиционные параметры

### Глава 33. Управление потоком выполнения: цикл for

### Глава 34. Строки и числа

### Глава 35. Массивы

### Глава 36. Экзотика
