# William Shotts - The Linux Command Line

- [Часть I. Командная оболочка](#часть-i-командная-оболочка)
  - [Глава 1. Что такое командная оболочка](#глава-1-что-такое-командная-оболочка)
  - [Глава 2. Навигация](#глава-2-навигация)
  - [Глава 3. Исследование системы](#глава-3-исследование-системы)
  - [Глава 4. Операции с файлами и каталогами](#глава-4-операции-с-файлами-и-каталогами)
  - [Глава 5. Работа с командами](#глава-5-работа-с-командами)
  - [Глава 6. Перенаправление](#глава-6-перенаправление)
  - [Глава 7. Взгляд на мир глазами командной оболочки](#глава-7-взгляд-на-мир-глазами-командной-оболочки)
  - [Глава 8. Продвинутые приемы работы с клавиатурой](#глава-8-продвинутые-приемы-работы-с-клавиатурой)
  - [Глава 9. Привилегии](#глава-9-привилегии)
  - [Глава 10. Процессы](#глава-10-процессы)
- [Часть II. Окружение и настройка](#часть-ii-окружение-и-настройка)
  - [Глава 11. Окружение](#глава-11-окружение)
  - [Глава 12. Плавное введение в vi](#глава-12-плавное-введение-в-vi)
  - [Глава 13. Настройка приглашения к вводу](#глава-13-настройка-приглашения-к-вводу)
- [Часть III. Типичные задачи и основные инструменты](#часть-iii-типичные-задачи-и-основные-инструменты)
  - [Глава 14. Управление пакетами](#глава-14-управление-пакетами)
  - [Глава 15. Устройства хранения](#глава-15-устройства-хранения)
  - [Глава 16. Сети](#глава-16-сети)
  - [Глава 17. Поиск файлов](#глава-17-поиск-файлов)
  - [Глава 18. Архивация и резервное копирование](#глава-18-архивация-и-резервное-копирование)
  - [Глава 19. Регулярные выражения](#глава-19-регулярные-выражения)
  - [Глава 20. Обработка текста](#глава-20-обработка-текста)
  - [Глава 21. Форматирование вывода](#глава-21-форматирование-вывода)
  - [Глава 22. Печать](#глава-22-печать)
  - [Глава 23. Компиляция программ](#глава-23-компиляция-программ)
- [Часть IV. Сценарии командной оболочки](#часть-iv-сценарии-командной-оболочки)
  - [Глава 24. Создание первого сценария командной оболочки](#глава-24-создание-первого-сценария-командной-оболочки)
  - [Глава 25. Начало проекта](#глава-25-начало-проекта)
  - [Глава 26. Проектирование сверху вниз](#глава-26-проектирование-сверху-вниз)
  - [Глава 27. Управление потоком выполнения: ветвление при помощи if](#глава-27-управление-потоком-выполнения-ветвление-при-помощи-if)
  - [Глава 28. Чтение ввода с клавиатуры](#глава-28-чтение-ввода-с-клавиатуры)
  - [Глава 29. Управление потоком выполнения: циклы while и until](#глава-29-управление-потоком-выполнения-циклы-while-и-until)
  - [Глава 30. Поиск и устранение ошибок](#глава-30-поиск-и-устранение-ошибок)
  - [Глава 31. Управление потоком выполнения: ветвление с помощью case](#глава-31-управление-потоком-выполнения-ветвление-с-помощью-case)
  - [Глава 32. Позиционные параметры](#глава-32-позиционные-параметры)
  - [Глава 33. Управление потоком выполнения: цикл for](#глава-33-управление-потоком-выполнения-цикл-for)
  - [Глава 34. Строки и числа](#глава-34-строки-и-числа)
  - [Глава 35. Массивы](#глава-35-массивы)
  - [Глава 36. Экзотика](#глава-36-экзотика)

## Часть I. Командная оболочка

### Глава 1. Что такое командная оболочка

- Командная оболочка - это программа, которая принимает команды, введенные с клавиатуры, и передает их операционной системе для выполнения.
- Примеры командных оболочек: `bash`, `tcsh`, `zsh`, `ksh`, `sh`.
- Эмулятор терминала - это программа, которая позволяет вводить команды в командную оболочку.
- Примеры эмуляторов терминала: `xterm`, `gnome-terminal`, `konsole`, `rxvt`, `aterm`.
- Приглашение к вводу, пример: `user@hostname:~$`.
- Знак суперпользователя - `#`.
- Основные клавиши и команды
  - KeyUp, KeyDown - перемещение по истории команд.
  - `date` - вывод текущей даты и времени.
  - `cal` - вывод календаря.
  - `df` - вывод информации о дисковом пространстве.
  - `free` - вывод информации о памяти.
  - `exit` - выход из командной оболочки.

### Глава 2. Навигация

- В Unix-подобных системах всегда имеется только одна файловая система, начинающаяся с корневого каталога `/`.
- Устройсва хранения данных монтируются в каталоги.
- `pwd` - вывод текущего рабочего каталога.
- `ls` - вывод содержимого каталога.
- `cd` - смена рабочего каталога (cd - change directory).
  - `cd ~user` - переход в домашний каталог пользователя.
- `.` - текущий каталог.
- `..` - родительский каталог.

### Глава 3. Исследование системы

- `ls ~ /` - вывод содержимого домашнего каталога и корневого каталога.
- `ls -l` - вывод содержимого каталога в виде списка (l = long).
- **Мнемоника: `command -option argument`**.
- `ls -lt` - вывод содержимого каталога в виде списка, отсортированного по времени последнего изменения.
  - `l` - long, `t` - time.
- `ls -r` - вывод содержимого каталога в обратном порядке.
- `ls -d` - вывод информации о каталоге, а не его содержимом.
- `ls -S` - сортировка по размеру.
- Пример длинного формата вывода: `-rw-r--r-- 1 user user 0 Sep 27 15:37 file.txt`.
  - `-rw-r--r--` - права доступа.
    - `pos1` - тип файла: `-` - обычный файл, `d` - каталог, `l` - символическаак ссылка.
    - `pos2-4` - права доступа владельца.
    - `pos5-7` - права доступа группы.
    - `pos8-10` - права доступа остальных пользователей.
  - `1` - количество жестких ссылок.
  - `user user` - владелец и группа.
  - `0` - размер в байтах.
  - `Sep 27 15:37` - дата последнего изменения.
  - `file.txt` - имя файла.
- `file file.txt` - вывод информации о типе файла.
- `less file.txt` - просмотр содержимого файла.
  - `q` - выход.
  - `KeyUp`, `KeyDown` - перемещение по тексту.
  - `1G` - переход в начало файла.
  - `/pattern` - поиск строки.
  - `n` - следующее вхождение.

- **Каталоги в системе linux**
  - `/` - корневой каталог.
  - `/bin` - исполняемые файлы, необходимые для загрузки системы.
  - `/boot` - содержит ядро Linux, образ начального RAM-диска и файлы загрузчика.
  - `/dev` - файлы устройств.
  - `/etc` - конфигурационные файлы.
    - `/etc/passwd` - список всех пользователей.
    - `/etc/crontab` - расписание задач.
    - `/etc/fstab` - таблица монтирования.
  - `/home` - домашние каталоги пользователей.
  - `/lib` - библиотеки, необходимые для работы программ.
  - `/media` - точка монтирования для съемных носителей.
  - `/mnt` - точка монтирования для временных файловых систем.
  - `/opt` - дополнительное программное обеспечение.
  - `/proc` - виртуальная файловая система, содержащая информацию о процессах. Позволяет заглянуть в ядро.
  - `/root` - домашний каталог суперпользователя.
  - `/sbin` - исполняемые файлы, необходимые для загрузки системы. Запускаются суперпользователем.
  - `/tmp` - временные файлы.
  - `/usr` - вторичная иерархия каталогов, содержащая исполняемые файлы, библиотеки, заголовочные файлы и документацию обычных пользователей.
    - `/usr/bin` - исполняемые файлы.
    - `/usr/include` - заголовочные файлы.
    - `/usr/lib` - библиотеки.
    - `/usr/local` - дополнительное программное обеспечение. Не входит в состав дистрибутива, но доступно для всех пользователей.
    - `/usr/sbin` - Содержит дополнительные программы для администрирования.
    - `/usr/share` - общие данные. Конфигурационные файлы, документация, иконки.
    - `/usr/share/doc` - документация по установленным пакетам.
    - `/usr/share/man` - справочные страницы.
    - `/var` - содержит изменяемые файлы, такие как журналы, временные файлы, почту и т.д.
      - `/var/log` - журналы.
      - `/var/spool` - почта и принтеры.
      - `/var/tmp` - временные файлы.

### Глава 4. Операции с файлами и каталогами

- Wildcards: `*`, `?`, `[]`, [simbols], [!simbols], [[:class:]].
- `mkdir` - создание каталога.
- `cp source.txt dest.txt` - копирование файла.
  - `cp -a` - копирование со всеми атрибутами.
  - `cp -i` - запрос на подтверждение.
  - `cp -r` - рекурсивное копирование.
  - `cp -u` - копирование только новых файлов.
  - **`cp -v` - подробный вывод.**
- `mv source.txt dest.txt` - перемещение файла. Работает аналогично `cp`.
- `rm file.txt` - удаление файла.
  - `rm -i` - запрос на подтверждение.
  - `rm -r` - рекурсивное удаление.
  - `rm -f` - удаление без запроса на подтверждение.

- **Жесткие ссылки**
  - По умолчанию каждый файл имеет одну жесткую ссылку.
  - Жесткая ссылка не может указывать на файл за пределами собственной файловой системы.
  - Влияют на время жизни файла. Когда удаляется последняя жесткая ссылка, файл удаляется.
  - Создавая жесткую ссылку, мы фактически создаем дополнительнйы раздел с именем, ссылающийся на тот же раздел с данными.
  - `inode` - структура данных, содержащая информацию о файле. Т.е. каждая жесткая ссылка ссылается на определенный индексный узел с содержимым файла.
  - `ln file.txt link.txt` - создание жесткой ссылки.

- **Символические ссылки**
  - Были придуманы, чтобы преодолеть ограничения жестких ссылок. Могут ссылаться на файлы вне текущей файловой системы.
  - Может провиснуть, если целевой файл удален.
  - Символическая ссылка не влияет на время жизни файла.
  - Операции над симолической ссылкой применяются к целевому файлу, кроме команд `rm`, которая удаляет саму ссылку.
  - `ln -s file.txt link.txt` - создание символической ссылки.

### Глава 5. Работа с командами

- **Чем могут быть команды в Linux**
  - Скомпилированные программы. Например в папке `/usr/bin`. Например `ls`, `cp`, `mv`.
  - `shell builtins` - встроенные команды оболочки. Например `cd`, `echo`, `exit`.
  - `shell functions` - функции оболочки. Мини сценарии, встроенные в окружение.
  - `aliases` - псевдонимы команд. Например `alias ll='ls -l'`.

- **Команды**
  - `type` - вывод типа команды.
  - `which` - вывод пути к исполняемому файлу. Ищет только скомпилированные программы.
  - `--help` - вывод краткой справки по использованию. Например `ls --help`.
  - `man` - вывод справочного руководства со ссылками. Например `man ls`.
    - `man 1 ls` - вывод справки по команде `ls`.
    - `man 5 passwd` - вывод справки по файлу `/etc/passwd`.
    - Т.е. `man section command`. Где `section` - номер раздела справки.
  - `apropos` - поиск по ключевым словам в справке. Например `apropos copy`.
    - То же самое что `man -k`.
  - `whatis` - вывод краткой информации о команде. Например `whatis ls`.
  - `info` - вывод информации о команде в формате `info`. Например `info ls`. Кликабельные ссылки.
    - `info coreutils` - вывод информации о пакете `coreutils`.

- **Разделение команд**
  - Разделение команд `;`, чтобы выполнить несколько команд подряд в одной строке. Например `ls; pwd`.

- **Алиасы**
  - Создание алиасов `alias ll='ls -l'`.
  - Удаление алиасов `unalias ll`.
  - Алиасы изчезают после завершения сеанса.

### Глава 6. Перенаправление

- **Потоки**
  - `stdin` - стандартный поток ввода.
  - `stdout` - стандартный поток вывода. Дескриптор 1.
  - `stderr` - стандартный поток ошибок. Дескриптор 2.

- **Перенаправление вывода**
  - `ls -l /usr/bin > ls-output.txt` - **перенаправление потока вывода** в файл. **Перезапись**. Дескриптор 1 по умолчанию.
  - `ls -l /usr/bin >> ls-output.txt` - перенаправление вывода в файл. **Добавление**. Дескриптор 1 по умолчанию.
  - `ls -l /usr/bin 2> ls-error.txt` - **перенаправление ошибок** в файл. Перезапись. Дескриптор 2.
  - `ls -l /bin/usr > ls-output.txt 2>&1` - **перенаправление всего вывода** в файл (stdout и stderr).
    - Порядок перенаправления важен. Сначала указывается stdout, затем stderr.
    - `ls -l /bin/usr &> ls-output.txt` - **Более короткая запись**.
  - `ls -l /bin/usr 2> /dev/null` - удаление нежелательного ввода. Перенаправление в `/dev/null`.
    - `/dev/null` - специальный файл, который игнорирует все, что в него пишется.

- **cat - конкатенация или вывод содержимого файлов**
  - `cat file1.txt file2.txt` - вывод содержимого файлов. Выводит по очереди их содержимое и получается конкатенация.
    - `cat` - без аргументов, копирует стандартный ввод в стандартный вывод. Нажать `Ctrl+D`(EOF) для завершения.
    - `cat < file.txt` - перенаправление файла в стандартный ввод. Результат тот же, что и `cat file.txt`.

- **Конвейер** `cmd1 | cmd2`. Стандартный вывод одной команды передается в стандартный ввод другой.
  - `ls -l /usr/bin | less` - вывод содержимого каталога постранично.

- **Фильтры** - принимают ввод, изменяют его определенным образом и выводят результат.
  - `sort` - сортировка строк: `ls -l /usr/bin | sort | less`.
  - `uniq` - вывод уникальных строк: `ls -l /usr/bin | sort | uniq | less`.
    - `uniq -d` - вывод дубликатов.
  - `wc` - подсчет строк, слов и символов: `ls -l /usr/bin | wc`.
    - `wc -l` - подсчет строк.
    - `wc -w` - подсчет слов.
    - `wc -c` - подсчет символов.
  - **`grep` - поиск строк по шаблону(регулярные выражения): `ls -l /usr/bin | grep zip`**.
    - `grep -v` - вывод строк, не содержащих шаблон.
    - `grep -i` - игнорирование регистра.
    - `grep -c` - подсчет строк.
    - `grep -n` - вывод номеров строк.
    - **`grep -r` - рекурсивный поиск**.
  - `head` - вывод начала файла: `ls -l /usr/bin | head`.
    - `head -n 10` - вывод первых 10 строк.
  - `tail` - вывод конца файла: `ls -l /usr/bin | tail`.
    - `tail -n 10` - вывод последних 10 строк.
    - **`tail -f` - вывод конца файла в реальном времени**.
  - `tee` - Т-образное разветвление потока вывода (например в файл и на экран): `ls -l /usr/bin | tee ls-output.txt | less`.
    - Сохраняет вывод команды, передаваемый через конвейер (в данном случае — `ls /usr/bin`), в файл и одновременно передает его в конвейер для дальнейшей обработки.

### Глава 7. Взгляд на мир глазами командной оболочки

### Глава 8. Продвинутые приемы работы с клавиатурой

### Глава 9. Привилегии

### Глава 10. Процессы

## Часть II. Окружение и настройка

### Глава 11. Окружение

### Глава 12. Плавное введение в vi

### Глава 13. Настройка приглашения к вводу

## Часть III. Типичные задачи и основные инструменты

### Глава 14. Управление пакетами

### Глава 15. Устройства хранения

### Глава 16. Сети

### Глава 17. Поиск файлов

### Глава 18. Архивация и резервное копирование

### Глава 19. Регулярные выражения

### Глава 20. Обработка текста

### Глава 21. Форматирование вывода

### Глава 22. Печать

### Глава 23. Компиляция программ

## Часть IV. Сценарии командной оболочки

### Глава 24. Создание первого сценария командной оболочки

### Глава 25. Начало проекта

### Глава 26. Проектирование сверху вниз

### Глава 27. Управление потоком выполнения: ветвление при помощи if

### Глава 28. Чтение ввода с клавиатуры

### Глава 29. Управление потоком выполнения: циклы while и until

### Глава 30. Поиск и устранение ошибок

### Глава 31. Управление потоком выполнения: ветвление с помощью case

### Глава 32. Позиционные параметры

### Глава 33. Управление потоком выполнения: цикл for

### Глава 34. Строки и числа

### Глава 35. Массивы

### Глава 36. Экзотика
